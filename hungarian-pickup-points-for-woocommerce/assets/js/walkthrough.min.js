jQuery(document).ready(function(e){var t={steps:["providers","cost","design","zone","pro","kvikk","success"],current_step:0,$button_next:e(".vp-woo-pont-walkthrough-nav-next"),$button_previous:e(".vp-woo-pont-walkthrough-nav-previous"),$container:e(".vp-woo-pont-walkthrough"),$steps:e(".vp-woo-pont-walkthrough-steps"),$step:e(".vp-woo-pont-walkthrough-step"),init:function(){e(".vp-woo-pont-walkthrough-step-"+this.steps[0]).addClass("active"),this.update_step_class(),this.$button_next.on("click",this.next_page),this.$button_previous.on("click",this.previous_page),e("input#provider-foxpost").prop("checked",!0),e('input[data-carrier="expressone"]').on("change",this.on_expressone_select),e("input#provider-dpd").on("change",this.on_dpd_select),e(".vp-woo-pont-color-picker").wpColorPicker(),e(".vp-woo-pont-walkthrough-nav-cancel").on("click",this.cancel)},next_page:function(){return t.validate()&&(t.current_step+=1,t.update_step_class(),t.steps.length-1==t.current_step&&t.finish()),!1},previous_page:function(){return t.current_step-=1,t.update_step_class(),!1},update_step_class:function(){t.$step.removeClass("active");var n=t.steps[t.current_step];e(".vp-woo-pont-walkthrough-step-"+n).addClass("active"),0==t.current_step?t.$container.attr("data-step","first"):t.steps.length-1==t.current_step?t.$container.attr("data-step","last"):t.$container.attr("data-step","")},on_expressone_select:function(){e('input[data-carrier="expressone"]:checked').length?e(".step-expressone").show():e(".step-expressone").hide()},on_dpd_select:function(){e(this).prop("checked")?e(".step-dpd").show():e(".step-dpd").hide()},validate:function(){var n=t.steps[t.current_step],o=e(".vp-woo-pont-walkthrough-step-"+n);switch(n){case"providers":return 0==e('input[name="providers[]"]:checked').length?(t.shake(o.find("ul")),!1):(!e("input#provider-dpd").prop("checked")||""!=e('input[name="dpd_username"]').val()&&""!=e('input[name="dpd_password"]').val())&&(!e('input[data-carrier="expressone"]:checked').length||""!=e('input[name="expressone_company_id"]').val()&&""!=e('input[name="expressone_username"]').val()&&""!=e('input[name="expressone_password"]').val())?(e(".vp-woo-pont-walkthrough-step-cost input").prop("disabled",!0),e(".vp-woo-pont-walkthrough-step-cost li").hide(),o.find("input:checked").each(function(){var t=e(this).val();e("li.cost-row-"+t).show(),e("li.cost-row-"+t).find("input").prop("disabled",!1)}),!0):(t.shake(o.find(".step-dpd")),!1);case"cost":var s=!1;return o.find("li:visible").each(function(){""==e(this).find("input").val()&&(t.shake(e(this)),s=!0)}),!s;case"design":return $name_field=o.find('input[name="method_name"]'),console.log($name_field),""!=$name_field.val()||(t.shake($name_field.parent()),!1);case"zone":return 0==e('input[name="zones[]"]').length||(0!=e('input[name="zones[]"]:checked').length||(t.shake(o.find("ul")),!1));default:return!0}},shake:function(e){e.addClass("fail"),setTimeout(function(){e.removeClass("fail")},1e3)},finish:function(){var t=e(".vp-woo-pont-walkthrough-form").serialize();e.post(ajaxurl,t,function(e){console.log(e)})},cancel:function(){var t=e(this).data("nonce"),n=e(this).parent(),o=e(this).data("url"),s={action:"vp_woo_pont_cancel_setup_wizard",nonce:t};return n.block({message:null,overlayCSS:{background:"#ffffff url("+vp_woo_pont_params.loading+") no-repeat center",backgroundSize:"16px 16px",opacity:.6}}),e.post(ajaxurl,s,function(e){window.location.href=o}),!1}};e(".vp-woo-pont-walkthrough").length&&t.init()});